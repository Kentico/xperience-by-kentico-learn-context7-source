<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Handle global events</title>
</head>
<body>
<p>Global events allow you to execute custom code whenever specific actions occur within the system. Events can be raised as a result of both user interaction and the logic of the application itself (default or custom). When you assign a method as a handler for an event, the system automatically executes the code whenever the corresponding action occurs.</p>
<p>For example, when a new page is added to your website, you can use an event handler to load the page’s data, send out the content by email, and use a third-party component to generate a PDF version of the page.</p>
<h2 id="assign-handlers-to-events">Assign handlers to events</h2>

<div>

</div>
<div>
<p><strong>Object event handlers</strong></p>
<p>Object events represent the most common actions that occur in the system. They are triggered when objects are created, updated or deleted. The Xperience API provides a newer approach for implementing and registering object event handlers, which supports both synchronous and asynchronous code.</p>
<p>See <a href="/documentation/developers-and-admins/customization/handle-global-events/handle-object-events">Handle object events</a> for detailed information.</p>
</div>

<p>For non-object global events, register handlers using code in the following format:</p>
<p><strong>&lt;event class&gt;.&lt;event action&gt;.&lt;event type&gt; += &lt;handler method name&gt;</strong></p>
<ul>
<li>
<strong>Event class</strong> – event classes are containers of events related to groups of functionality</li>
<li>
<strong>Event action</strong> – represents a specific action that occurs within the system</li>
<li>
<strong>Event type</strong> – determines when exactly the event takes place, typically <code>Before</code> or <code>After</code> the action that invokes it. Some actions only have one type: <code>Execute</code>
</li>
</ul>
<p>For example:</p>

<div>
<div>
<div>
<span>C#</span>
</div>
<strong></strong>
</div>
<div>
<button>
<span></span><span></span> <span>Copy</span>
</button>
</div>
</div>
<div>
<pre><code>

WebPageEvents.UpdateDraft.After += Page_Update_After;

</code></pre>
</div>

<p>The event handlers provide parameters derived from <code>EventArgs</code>, which you can use to access data related to the action that occurred. The exact type of the parameter depends on the event.</p>

<div>

</div>
<div>
<p>For information about the available event classes, actions, event types and handler parameters, see: <a href="/documentation/developers-and-admins/customization/handle-global-events/reference-global-system-events">Reference - Global system events</a></p>
</div>

<p>You need to register event handlers at the beginning of the application’s lifecycle (during application startup). See <a href="/documentation/developers-and-admins/customization/run-code-on-application-startup">Run code on application startup</a> for more information.</p>
<h2 id="example">Example</h2>
<p>The following steps describe how to register methods as global event handlers:</p>
<ol type="1">
<li><p>Open your project in Visual Studio.</p></li>
<li>
<p><a href="/documentation/developers-and-admins/customization/run-code-on-application-startup">Add custom initialization code</a> that handles the required events.</p>
<ul>
<li>Add the code into a custom <em>Class Library</em> project within your solution. See <a href="/documentation/developers-and-admins/customization/integrate-custom-code">Integrate custom code</a> for more information.</li>
</ul>
</li>
</ol>

<div>
<div>
<div>
<span>C#</span>
</div>
<strong></strong>
</div>
<div>
<button>
<span></span><span></span> <span>Copy</span>
</button>
</div>
</div>
<div>
<pre><code>

using CMS;
using CMS.DataEngine;
using CMS.Websites;

// Registers the custom module into the system
[assembly: RegisterModule(typeof(CustomInitializationModule))]

public class CustomInitializationModule : Module
{
    // Module class constructor, the system registers the module under the name "CustomInit"
    public CustomInitializationModule()
        : base("CustomInit")
    {
    }

    // Contains initialization code that is executed when the application starts
    protected override void OnInit()
    {
        base.OnInit();

        // Assigns custom handlers to events   
        WebPageEvents.Create.After += Page_Create_After;   
        WebPageEvents.UpdateDraft.Before += Page_UpdateDraft_Before;
    }

    private void Page_Create_After(object sender, CreateWebPageLanguageVariantEventArgs e)
    {
        // Add custom actions here
    }

    private void Page_UpdateDraft_Before(object sender, UpdateWebPageDraftEventArgs e)
    {
        // Add custom actions here
    }
}

</code></pre>
</div>


</body>
</html>
